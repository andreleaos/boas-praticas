
Lambdas

â˜ï¸ O que Ã© AWS Lambda?

- ServiÃ§o de computaÃ§Ã£o serverless da AWS.
- Permite executar cÃ³digo sem necessidade de gerenciar servidores.
- VocÃª paga apenas pelo tempo de execuÃ§Ã£o (por invocaÃ§Ã£o e duraÃ§Ã£o).
- Escalabilidade automÃ¡tica.
- Suporte a vÃ¡rias linguagens, incluindo Java, Python, Node.js, Go, C#, Ruby e outros.

ğŸ”¥ Conceito Chave do AWS Lambda

- âœ… FunÃ§Ã£o pequena, desacoplada e com uma Ãºnica responsabilidade.
- âœ… Executada em resposta a eventos:
	- HTTP/API Gateway
	- S3 (upload, delete)
	- DynamoDB Streams
	- EventBridge
	- SNS, SQS
	- InvocaÃ§Ã£o direta

ğŸ—ï¸ Estrutura de uma Lambda em Java

- âœ”ï¸ Uma Lambda Java Ã© essencialmente uma classe que implementa uma interface da AWS SDK, geralmente:
- âœ… RequestHandler<I, O>
- âœ… ou RequestStreamHandler (para controle mais avanÃ§ado)

ğŸ¯ Exemplo BÃ¡sico com Java â€” Lambda Hello World

âœ”ï¸ DependÃªncia Maven necessÃ¡ria:

<dependency>
    <groupId>com.amazonaws</groupId>
    <artifactId>aws-lambda-java-core</artifactId>
    <version>1.2.3</version>
</dependency>


âœ”ï¸ ImplementaÃ§Ã£o da Lambda:

package br.com.lambda;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;

public class HelloLambda implements RequestHandler<String, String> {

    @Override
    public String handleRequest(String input, Context context) {
        context.getLogger().log("Input recebido: " + input);
        return "OlÃ¡, " + input + "! Sua Lambda executou com sucesso.";
    }
}

âœ”ï¸ Empacotamento

No Maven, gera-se um arquivo .jar usando:

mvn clean package

âœ”ï¸ O JAR deve ser do tipo â€œuber jarâ€ ou â€œfat jarâ€, contendo todas as dependÃªncias.

âœ”ï¸ ConfiguraÃ§Ã£o da Lambda na AWS:

Runtime: Java 11 ou Java 17
Handler: br.com.lambda.HelloLambda::handleRequest
Upload: arquivo .jar

ğŸš€ Testando a Lambda (Exemplo de Payload):

Input:
"AndrÃ©"

Output:
"OlÃ¡, AndrÃ©! Sua Lambda executou com sucesso."

---

ğŸ”¥ Exemplo Real â€” Lambda para Processar Dados

âœ”ï¸ Objetivo:

- Receber um JSON com dados de cliente.
- Retornar uma mensagem de confirmaÃ§Ã£o.

âœ… Classe Cliente.java (Model)

package br.com.lambda.model;

public class Cliente {
    private String nome;
    private String email;

    public Cliente() { }

    public Cliente(String nome, String email) {
        this.nome = nome;
        this.email = email;
    }

    public String getNome() { return nome; }
    public String getEmail() { return email; }

    public void setNome(String nome) { this.nome = nome; }
    public void setEmail(String email) { this.email = email; }
}

---

âœ… Lambda Handler:

package br.com.lambda;

import br.com.lambda.model.Cliente;
import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;

public class ProcessarClienteLambda implements RequestHandler<Cliente, String> {

    @Override
    public String handleRequest(Cliente input, Context context) {
        context.getLogger().log("Processando cliente: " + input.getNome());
        return "Cliente " + input.getNome() + " com email " + input.getEmail() + " processado com sucesso.";
    }
}

âœ… Exemplo de Payload JSON:

{
    "nome": "AndrÃ© LeÃ£o",
    "email": "andre@email.com"
}


âœ… Resposta:

"Cliente AndrÃ© LeÃ£o com email andre@email.com processado com sucesso."

---

ğŸ—ï¸ Deploy â€” Formas Comuns:

âœ”ï¸ Manual pela Console AWS.
âœ”ï¸ Via AWS CLI:

aws lambda create-function --function-name MinhaLambda \
--runtime java17 \
--handler br.com.lambda.ProcessarClienteLambda::handleRequest \
--role arn:aws:iam::123456789012:role/execution-role \
--zip-file fileb://meu-jar-lambda.zip

---

âœ”ï¸ Via Infraestrutura como CÃ³digo:

- CloudFormation
- Terraform
- AWS SAM (Serverless Application Model)

ğŸ† Boas PrÃ¡ticas para Lambda com Java:

| PrÃ¡tica                       | âœ”ï¸ Dicas                                                                                         |
| ----------------------------- | ------------------------------------------------------------------------------------------------ |
| Tempo de startup              | Java possui tempo de cold start maior que Node/Python. Otimize com SnapStart (Java 11/Corretto). |
| Classes pequenas              | Uma funÃ§Ã£o = uma responsabilidade.                                                               |
| Empacotamento                 | Use Uber/Fat Jar com Maven Shade ou Spring Native para reduzir cold start.                       |
| Gerenciamento de dependÃªncias | Seja minimalista. Evite bibliotecas pesadas desnecessÃ¡rias.                                      |
| Monitoramento                 | Use CloudWatch Logs e X-Ray.                                                                     |
| Timeout                       | Configure bem (Java inicializa mais lento).                                                      |

----

ğŸ”¥ Lambda + API Gateway + Java â†’ API REST Serverless

- âœ”ï¸ Lambda + API Gateway â†’ Cria uma API REST sem servidor.
- Lambda processa requisiÃ§Ãµes HTTP.
- API Gateway faz o roteamento das rotas.